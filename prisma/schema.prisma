generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model external_orders {
  id              BigInt            @id @default(autoincrement())
  order_number    String            @unique @db.VarChar(100)
  customer        String            @db.VarChar(255)
  product         String            @db.VarChar(255)
  quantity        Int
  status          String            @default("received") @db.VarChar(50)
  processed_at    DateTime?         @db.Timestamp(6)
  created_at      DateTime          @default(now()) @db.Timestamp(6)
  updated_at      DateTime          @default(now()) @db.Timestamp(6)
  processing_logs processing_logs[]

  @@index([processed_at], map: "idx_external_orders_processed_at")
}


model processing_logs {
  id                BigInt          @id @default(autoincrement())
  external_order_id BigInt
  level             String          @default("info") @db.VarChar(20)
  message           String
  metadata          Json?
  created_at        DateTime        @default(now()) @db.Timestamp(6)
  external_orders   external_orders @relation(fields: [external_order_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([created_at], map: "idx_processing_logs_created_at")
}


model spatial_ref_sys {
  srid      Int     @id
  auth_name String? @db.VarChar(256)
  auth_srid Int?
  srtext    String? @db.VarChar(2048)
  proj4text String? @db.VarChar(2048)
}
